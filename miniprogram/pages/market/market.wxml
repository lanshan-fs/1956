<!--pages/market/market.wxml-->
<view class="container">
  <!-- 顶部导航栏 (组件化) -->
  <neo-nav mode="custom" bind:heightchange="onNavHeightChange">
    <!-- 校区选择 -->
    <picker slot="left" bindchange="onCampusChange" value="{{campusIndex}}" range="{{campuses}}">
      <view class="campus-picker">
        <text class="campus-text">{{campuses[campusIndex]}}</text>
        <view class="picker-arrow">▼</view>
      </view>
    </picker>

    <!-- 搜索框 -->
    <view slot="center" class="search-bar" bindtap="onSearchTap">
      <icon type="search" size="14" color="#1A1A1A"/>
      <text class="search-placeholder">搜索...</text>
    </view>
  </neo-nav>

  <!-- Block 2: 标签栏与管理面板 (组件化) -->
  <neo-tabs-bar
    tabs="{{categories}}"
    active="{{activeCategory}}"
    top="{{navHeaderHeight}}"
    bind:change="onCategoryChange"
  />

  <!-- 瀑布流内容区 -->
  <view class="waterfall-container">
    <!-- 左列 -->
    <view class="waterfall-col">
      <block wx:for="{{leftList}}" wx:key="id">
        <neo-goods-card item="{{item}}" bind:click="onItemTap" />
      </block>
    </view>

    <!-- 右列 -->
    <view class="waterfall-col">
      <block wx:for="{{rightList}}" wx:key="id">
        <neo-goods-card item="{{item}}" bind:click="onItemTap" />
      </block>
    </view>
  </view>

  <!-- 发布按钮 -->
  <view class="fab-btn" bindtap="onPostTap">
    <text class="fab-icon">+</text>
    <text class="fab-text">发布闲置</text>
  </view>
</view>