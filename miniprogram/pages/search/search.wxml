<view class="container page-search">
  
  <!-- è‡ªå®šä¹‰å¯¼èˆªæ  -->
  <view class="search-nav" style="height: {{navTotalHeight}}px;">
    <view class="nav-content-wrapper" style="top: {{navContentTop}}px; height: {{navContentHeight}}px;">
      
      <!-- è¿”å›æŒ‰é’® -->
      <view class="nav-left" bindtap="onNavBack">
        <view class="icon-back"></view>
      </view>
      
      <!-- æœç´¢è¾“å…¥æ¡† -->
      <view class="search-input-box" style="margin-right: {{searchBarRight}}px;">
        <view class="icon-search">ğŸ”</view>
        <input 
          class="real-input" 
          placeholder="æœç´¢æ ¡åŒº/è¯¾ç¨‹/ç”Ÿæ´»..." 
          value="{{keyword}}"
          bindinput="onInput"
          bindconfirm="onSearch"
          confirm-type="search"
          adjust-position="{{true}}"
          focus="{{true}}"
        />
        <view class="icon-clear" bindtap="onClearInput" wx:if="{{keyword}}">Ã—</view>
      </view>

    </view>
  </view>

  <!-- å†…å®¹åŒº -->
  <scroll-view 
    scroll-y 
    class="search-scroll" 
    style="padding-top: {{navTotalHeight}}px;"
  >
    
    <!-- é»˜è®¤å±•ç¤ºï¼šå†å²è®°å½• + çƒ­æœ -->
    <view class="default-view" wx:if="{{!showResult}}">
      
      <!-- å†å²è®°å½• -->
      <view class="section-block" wx:if="{{historyList.length > 0}}">
        <view class="section-header">
          <text class="title">å†å²è®°å½•</text>
          <view class="icon-delete" bindtap="onClearHistory">ğŸ—‘</view>
        </view>
        <view class="tags-wrapper">
          <view 
            class="neo-tag history" 
            wx:for="{{historyList}}" 
            wx:key="*this"
            bindtap="onTagSearch"
            data-text="{{item}}"
          >{{item}}</view>
        </view>
      </view>

      <!-- çƒ­æœæ¦œ -->
      <view class="section-block">
        <view class="section-header">
          <text class="title">çƒ­é—¨æœç´¢ ğŸ”¥</text>
        </view>
        <view class="hot-list">
          <view 
            class="hot-item" 
            wx:for="{{hotList}}" 
            wx:key="id"
            bindtap="onTagSearch"
            data-text="{{item.text}}"
          >
            <view class="rank-num {{index < 3 ? 'top' : ''}}">{{index + 1}}</view>
            <text class="hot-text">{{item.text}}</text>
            <view class="hot-tag {{item.tag}}" wx:if="{{item.tag}}">{{item.tag === 'new' ? 'æ–°' : 'çƒ­'}}</view>
          </view>
        </view>
      </view>
    
    </view>

    <!-- æœç´¢ç»“æœï¼šç€‘å¸ƒæµ -->
    <view class="result-view" wx:else>
      <view class="waterfall-container">
        <view class="column">
          <block wx:for="{{resultLeft}}" wx:key="id">
            <neo-card 
              title="{{item.title}}" 
              cover="{{item.cover}}" 
              nickname="{{item.nickname}}" 
              likes="{{item.likes}}" 
              isLiked="{{item.isLiked}}"
              bind:click="onCardClick"
              data-id="{{item.id}}"
            />
          </block>
        </view>
        <view class="column">
          <block wx:for="{{resultRight}}" wx:key="id">
            <neo-card 
              title="{{item.title}}" 
              cover="{{item.cover}}" 
              nickname="{{item.nickname}}" 
              likes="{{item.likes}}" 
              isLiked="{{item.isLiked}}"
              bind:click="onCardClick"
              data-id="{{item.id}}"
            />
          </block>
        </view>
      </view>
      
      <!-- ç©ºç»“æœæç¤º -->
      <view class="empty-result" wx:if="{{resultLeft.length === 0 && resultRight.length === 0}}">
        <text>æ¢ä¸ªå…³é”®è¯è¯•è¯•å§~</text>
      </view>
    </view>

  </scroll-view>
</view>